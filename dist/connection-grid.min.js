!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.MitchAllen||(b.MitchAllen={})).ConnectionGrid=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("@mitchallen/grid"),e=a("@mitchallen/connection-grid-core").create;b.exports=function(a){a=a||{};var b=a.rings||0,c=d.Circle({rings:b});if(!c)return null;c.fill(0);var f={CCW:16,CW:32,A:64,T:128,A0:256,T0:512,A1:1024,T1:2048},g={CCW:"CW",CW:"CCW",A:"T",T:"A",A0:"T0",T0:"A0",A1:"T1",T1:"A1"},h=e({grid:c,dirMap:f,oppositeMap:g});return Object.assign(h,{getNeighborDirs:function(a,b){if(0===a&&0===b)return["A0"];if(1===a&&0!==b)return["CCW","CW","A0","A1"];var c=this.ringSize(a+1),d=this.ringSize(a),e=this.ringSize(a-1);return d===e?0===c?["CCW","CW","T"]:c>d?["CCW","CW","A0","A1","T"]:["CCW","CW","A","T"]:b%2===0?0===c?["CCW","CW","T0"]:c>d?["CCW","CW","A0","A1","T0"]:["CCW","CW","A","T0"]:0===c?["CCW","CW","T1"]:c>d?["CCW","CW","A0","A1","T1"]:["CCW","CW","A","T1"]},getNeighbor:function(a,b,c){if(!this.isCell(a,b))return null;if(!this.isDir(c))return null;var d=this.ringSize(a),e={CCW:{x:a,y:0===b?d-1:b-1},CW:{x:a,y:(b+1)%d},A:{x:a+1,y:b},A0:{x:a+1,y:2*b},A1:{x:a+1,y:2*b+1},T:{x:a-1,y:b},T0:{x:a-1,y:b/2},T1:{x:a-1,y:(b-1)/2}},f=e[c];return f&&this.isCell(f.x,f.y)?f:null}}),h}},{"@mitchallen/connection-grid-core":6,"@mitchallen/grid":7}],2:[function(a,b,c){"use strict";var d=a("@mitchallen/grid"),e=a("@mitchallen/connection-grid-core").create;b.exports=function(a){a=a||{};var b=a.x||0,c=a.y||0,f=d.Hexagon({x:b,y:c});if(!f)return null;f.fill(0);var g={N:16,S:32,E:64,W:128,NW:256,NE:512,SW:1024,SE:2048},h={N:"S",S:"N",E:"W",W:"E",NE:"SW",NW:"SE",SE:"NW",SW:"NE"},i=e({grid:f,dirMap:g,oppositeMap:h});return Object.assign(i,{getNeighborDirs:function(a,b){return a%2===0?["N","S","E","W","NW","NE"]:["N","S","E","W","SW","SE"]},getNeighbor:function(a,b,c){if(!this.isCell(a,b))return null;if(!this.isDir(c))return null;var d={E:1,NE:1,SE:1,W:-1,NW:-1,SW:-1,N:0,S:0},e={S:1,SE:1,SW:1,N:-1,NE:-1,NW:-1,E:0,W:0},f=a+d[c],g=b+e[c];return this.isCell(f,g)?{x:f,y:g}:null}}),i}},{"@mitchallen/connection-grid-core":6,"@mitchallen/grid":7}],3:[function(a,b,c){"use strict";var d=a("./square"),e=a("./hexagon"),f=a("./circle"),g=a("./triangle"),h=function(a){return console.warn("@mitchallen/connection-grid: .create is deprecated. Use .Square instead."),d(a)};b.exports={create:h,Square:d,Hexagon:e,Circle:f,Triangle:g}},{"./circle":1,"./hexagon":2,"./square":4,"./triangle":5}],4:[function(a,b,c){"use strict";var d=a("@mitchallen/grid"),e=a("@mitchallen/connection-grid-core").create;b.exports=function(a){a=a||{};var b=a.x||0,c=a.y||0,f=d.Square({x:b,y:c});if(!f)return null;f.fill(0);var g={N:16,S:32,E:64,W:128},h={E:"W",W:"E",N:"S",S:"N"},i=e({grid:f,dirMap:g,oppositeMap:h});return Object.assign(i,{getNeighbor:function(a,b,c){if(!this.isCell(a,b))return null;if(!this.isDir(c))return null;var d={E:1,W:-1,N:0,S:0},e={E:0,W:0,N:-1,S:1},f=a+d[c],g=b+e[c];return this.isCell(f,g)?{x:f,y:g}:null},getNeighborDirs:function(a,b){return["N","S","E","W"]}}),i}},{"@mitchallen/connection-grid-core":6,"@mitchallen/grid":7}],5:[function(a,b,c){"use strict";var d=a("@mitchallen/grid"),e=a("@mitchallen/connection-grid-core").create;b.exports=function(a){a=a||{};var b=a.x||0,c=a.y||0,f=d.Square({x:b,y:c});if(!f)return null;f.fill(0);var g=1,h=2,i={N:16,S:32,E:64,W:128},j={E:"W",W:"E",N:"S",S:"N"},k=e({grid:f,dirMap:i,oppositeMap:j});return Object.assign(k,{getNeighbor:function(a,b,c){if(!this.isCell(a,b))return null;if(!this.isDir(c))return null;var d={E:1,W:-1,N:0,S:0},e={E:0,W:0,N:-1,S:1},f=a+d[c],g=b+e[c];return this.isCell(f,g)?{x:f,y:g}:null},getNeighborDirs:function(a,b){var c=(a+b)%2===0?g:h,d=c===h?"N":"S";return[d,"E","W"]}}),k}},{"@mitchallen/connection-grid-core":6,"@mitchallen/grid":7}],6:[function(b,c,d){(function(e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,(f.MitchAllen||(f.MitchAllen={})).ConnectionGridCore=b()}}(function(){var a;return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";var d=a("@mitchallen/shuffle");b.exports.create=function(a){a=a||{};var b=a.grid,c=a.dirMap||{},e=a.oppositeMap||{};if(!b)return null;var f=1,g=2;return Object.defineProperties(b,{dirMap:{writeable:!1,value:c,enumerable:!0,configurable:!0}}),Object.assign(b,{isDir:function(a){return"string"==typeof a&&void 0!==c[a]},getOppositeDir:function(a){return this.isDir(a)?e[a]:null},getNeighbor:function(a,b,c){return console.log("getNeighbor should be overriden by derived class"),null},getNeighborDirs:function(a,b){return console.log("getNeighborDirs should be overriden by derived class"),[]},getShuffledNeighborDirs:function(a,b){var c=d.create({array:this.getNeighborDirs(a,b)});return c.shuffle()},markVisited:function(a,b){return this.set(a,b,this.get(a,b)|f)},visited:function(a,b){return!!this.isCell(a,b)&&0!==(this.get(a,b)&f)},mask:function(a,b){return this.set(a,b,this.get(a,b)|g)},isMasked:function(a,b){return!!this.isCell(a,b)&&0!==(this.get(a,b)&g)},hasConnections:function(a,b){var d=this.get(a,b);if(null===d)return!1;if(0===d)return!1;var e=this.getNeighborDirs(a,b);for(var f in e){var g=e[f];if(!this.isDir(g))return console.error("hasConnections unknown direction: ",g),!1;var h=c[g];if(0!==(d&h))return!0}return!1},connect:function(a,b,d){return!!this.getNeighbor(a,b,d)&&this.set(a,b,this.get(a,b)|c[d])},connectUndirected:function(a,b,c){if(!this.connect(a,b,c))return!1;var d=this.getNeighbor(a,b,c);return!!this.connect(d.x,d.y,e[c])},connects:function(a,b,d){if(!this.isDir(d))return console.error("connects unknown direction: ",d),!1;var e=this.get(a,b);if(null===e)return!1;var f=c[d];return 0!==(e&f)},connectsAny:function(a,b,c){var d=this,e=!1;return c.forEach(function(c){d.connects(a,b,c)&&(e=!0)}),e}})}},{"@mitchallen/shuffle":2}],2:[function(b,c,d){(function(e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,(f.MitchAllen||(f.MitchAllen={})).Shuffle=b()}}(function(){return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";b.exports.create=function(a){if(!a)return null;if(!a.array)return null;var b=a.array.slice(0);return{shuffle:function(){var a=0,c=0,d=null;for(a=b.length-1;a>0;a-=1)c=Math.floor(Math.random()*(a+1)),d=b[a],b[a]=b[c],b[c]=d;return b}}}},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(b,c,d){(function(e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,(f.MitchAllen||(f.MitchAllen={})).Grid=b()}}(function(){return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";b.exports=function(a){a=a||{};var b=a.rows||0;b=Math.max(b,0);for(var c=[];c.push([])<b;);if(!c)return null;var d=Object.create({},{rows:{writeable:!1,value:b,enumerable:!0}});return Object.assign(d,{log:function(){console.log("size: %d: ",b),console.log(c)},rowSize:function(a){return a<0||a>=b?0:c[a].length},isCell:function(a,c){var d=this.rowSize(a);return a>=0&&a<b&&c>=0&&c<d},set:function(a,b,d){return!(a<0||b<0)&&(c[a][b]=d,!0)},get:function(a,b){return this.isCell(a,b)?c[a][b]:null},fill:function(a){for(var d=0;d<b;d++)for(var e=this.rowSize(d),f=0;f<e;f++)c[d][f]=a},cloneArray:function(){for(var a=[];a.push([])<b;);for(var d=0;d<b;d++)for(var e=this.rowSize(d),f=0;f<e;f++)a[d][f]=c[d][f];return a}})}},{}],2:[function(a,b,c){"use strict";var d=a("./base");b.exports=function(a){a=a||{};var b=a.rings||0;b=Math.max(b,0);var c=d({rows:b});c.set(0,0,0);for(var e=1/b,f=1;f<b;f++)for(var g=f/b,h=2*Math.PI*g,i=c.rowSize(f-1),j=h/i,k=Math.round(j/e),l=i*k,m=0;m<l;m++)c.set(f,m,0);return Object.defineProperties(c,{rings:{writeable:!1,value:b,enumerable:!0}}),Object.assign(c,{ringSize:function(a){return this.rowSize(a)}})}},{"./base":1}],3:[function(a,b,c){"use strict";var d=(a("./base"),a("./square")),e=a("./circle"),f=function(a){return console.warn("@mitchallen/grid: .create is deprecated. Use .Square instead."),d(a)};b.exports={create:f,Square:d,Circle:e,Hexagon:d,Triangle:d}},{"./base":1,"./circle":2,"./square":4}],4:[function(a,b,c){"use strict";var d=a("./base");b.exports=function(a){a=a||{};var b=a.x||0,c=a.y||0;b=Math.max(b,0),c=Math.max(c,0);for(var e=d({rows:b}),f=0;f<b;f++)for(var g=0;g<c;g++)e.set(f,g,0);return Object.defineProperties(e,{xSize:{writeable:!1,value:b,enumerable:!0},ySize:{writeable:!1,value:c,enumerable:!0}}),e}},{"./base":1}]},{},[3])(3)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3])(3)});